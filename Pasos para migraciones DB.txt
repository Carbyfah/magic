--CONECTAR AL CONTENEDOR MYSQL
docker exec -it magictravel_mysql mysql -u root -p

Password: root_secure_2025

--ELIMINAR Y RECREAR LA BASE DE DATOS
-- Eliminar la base de datos actual
DROP DATABASE IF EXISTS magictravel_v_2;

-- Crear la base de datos limpia
CREATE DATABASE magictravel_v_2 CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- Verificar que se creó
SHOW DATABASES;

-- Salir de MySQL
exit

--EJECUTAR MIGRACIONES DESDE LARAVEL
# Conectar al contenedor PHP
docker exec -it magictravel_php bash

# Ir al directorio del proyecto
cd /var/www/html

--Hacer migraciones basicas
php artisan migrate --path=database/migrations/0001_01_01_000000_create_users_table.php
php artisan migrate --path=database/migrations/0001_01_01_000001_create_cache_table.php
php artisan migrate --path=database/migrations/0001_01_01_000002_create_jobs_table.php


# Limpiar caché de configuración
php artisan config:clear
php artisan cache:clear

# Ejecutar migraciones en orden
php artisan migrate --path=database/migrations/10_magic_v_2.php
php artisan migrate --path=database/migrations/11_magic_auditoria_v_2.php
php artisan migrate --path=database/migrations/12_magic_automatizacion_v_2.php
php artisan migrate --path=database/migrations/13_magic_indexes_v_2.php
php artisan migrate --path=database/migrations/15_magic_audit_fks_v_2.php

--VERIFICACIÓN
# Ver el estado de las migraciones
php artisan migrate:status

# Salir del contenedor
exit






PASO 1: Generar el hash de la contraseña
# Dentro del contenedor PHP (/var/www/html)
php artisan tinker
Dentro de tinker:
phpecho Hash::make('admin123');

Copia el hash resultante (algo como $2y$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi)
Salir de tinker:
exit

PASO 2: Insertar datos iniciales en la DB
# Salir del contenedor PHP
exit

# Conectar nuevamente a MySQL
docker exec -it magictravel_mysql mysql -u root -p
# Password: root_secure_2025

# Usar la base de datos
USE magictravel_v_2;

PASO 3: Ejecutar los INSERT
-- Insertar rol administrador
INSERT INTO rol (rol_nombre, rol_codigo, rol_situacion, created_at, updated_at) 
VALUES ('Administrador', 'ADMIN', 1, NOW(), NOW());

-- Insertar persona
INSERT INTO persona (nombre_completo, iniciales, created_at, updated_at) 
VALUES ('Super Administrador', 'SA', NOW(), NOW());

-- Insertar usuario (REEMPLAZA 'HASH_AQUI' con el hash generado en el paso 1)
INSERT INTO usuario (usuario_codigo, usuario_password, persona_id, rol_id, usuario_situacion, created_at, updated_at) 
VALUES ('ADMIN', 'HASH_AQUI', 1, 1, 1, NOW(), NOW());

-- Verificar que se crearon
SELECT u.usuario_codigo, p.nombre_completo, r.rol_nombre 
FROM usuario u 
JOIN persona p ON u.persona_id = p.persona_id 
JOIN rol r ON u.rol_id = r.rol_id;

-- Salir de MySQL
exit
Ya puedes hacer login con:

Usuario: ADMIN
Contraseña: admin123